{% extends "base.html" %}

{% block title %}Open Problems - Home{% endblock %}

{% block content %}
<div class="hero">
    <h1>Open Problems</h1>
    <p>A curated list of unsolved problems awaiting brilliant minds.</p>
</div>

<div class="content-with-sidebar">
    <section class="problems-list">
        {% if problems %}
            {% for problem in problems %}
            <article class="problem-card">
                <a href="{{ url_for('problem', id=problem.id) }}">
                    <h2>{{ problem.title }}</h2>
                </a>
                {% if problem.category %}
                    <a href="{{ url_for('category', name=problem.category) }}" class="category">{{ problem.category }}</a>
                {% endif %}
                <p class="preview">{{ problem.description[:200] }}{% if problem.description|length > 200 %}...{% endif %}</p>
                <div class="meta">
                    <span>by {{ problem.username }}</span>
                    <span>{{ problem.created_at[:10] }}</span>
                </div>
            </article>
            {% endfor %}
        {% else %}
            <div class="empty-state">
                <p>No problems yet. {% if current_user %}<a href="{{ url_for('submit') }}">Submit one</a>!{% else %}<a href="{{ url_for('login') }}">Log in</a> to submit one!{% endif %}</p>
            </div>
        {% endif %}
    </section>

    {% if categories %}
    <aside class="sidebar">
        <h3>Categories</h3>
        <ul class="category-list">
            {% for cat in categories %}
                <li><a href="{{ url_for('category', name=cat.category) }}">{{ cat.category }}</a></li>
            {% endfor %}
        </ul>
    </aside>
    {% endif %}
</div>
{% endblock %}
